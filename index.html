<!DOCTYPE html>
<html>

<head>
	<title>Vaporwave Hangman</title>
	<link rel="stylesheet" type="text/css" href="./assets/css/style.css">
	<link rel="stylesheet" type="text/css" href="./assets/css/reset.css">
	<script type="text/javascript" src="./assets/javascript/game.js"></script>

	<!-- On-theme dictionary file consisting only of an array named "dictionary" -->
	<script type="text/javascript" src="./assets/javascript/hangmanDictionary.js"></script>	
</head>

<body onload="playGame()">
	
	<!-- Fullpage background wallpaper -->
	<div id="bg">
		<img src="./assets/images/wallpaper.jpg" alt="background image">
	</div>

	<!-- Container for all the screen elements -->
	<div class="margin-auto margintop-40px width-85-pct">

		<!-- Container for the toprow of windows: title and instructions  -->
		<div class="margin-auto width-100-pct">
			<aside class = "brdr-2px brdr-outset-grey flt-lft outsetborder-grey width-60-pct">
				<div class="bg-color-blue color-white font-sans font-size-14px pad-2px width-100-pct">Game Title</div>
				<div class="bg-color-grey pad-2px width-100-pct">VAPORWAVE HANGMAN</div>
			</aside>

			<aside class="brdr-2px brdr-outset-grey flt-rt marginbottom-24px outsetborder-grey width-35-pct">
				<div class="bg-color-blue color-white font-sans font-size-14px font-weight-lighter pad-2px width-100-pct">Did you know...</div>
				<div class="bg-color-grey font-sans font-size-14px font-weight-lighter pad-8px width-100-pct">This is a game of hangman. Type one letter at a time to guess the <span class="bg-color-blue color-white">TARGET WORD</span> without running out of <span class="bg-color-blue color-white">CHANCES</span><br><br>Type any letter key to make your first guess.</div>
			</aside>
		</div>

		<!-- Container for the main game components -->
		<div class="margin-auto width-100-pct">

			<!-- Top row window to display game stats -->
			<main class="brdr-2px brdr-outset-grey clear-floats margin-auto marginbottom-24px width-100-pct">
				<div class="bg-color-blue font-sans font-size-14px color-white pad-2px width-100-pct">Instructions</div>
				<div class="bg-color-black color-green font-monospace font-size-12px line-height-24px pad-2px">C:\player\hangman\<span class="bg-color-blue color-white">TARGET_WORD</span>&#62; &nbsp;<span class="color-white font-size-16px" id="targetWordDisplay"> </span>&nbsp;</div>
				<div class="bg-color-black color-green font-monospace font-size-12px line-height-24px pad-2px">C:\player\hangman\<span class="bg-color-blue color-white">CHANCES_REMAINING</span>&#62; &nbsp;<span class="color-white font-size-16px" id="chancesDisplay">7</span>&nbsp;</div>
			</main>
			
			<!-- Bottom row lefthand window to display guesses and cursor -->
			<main class="brdr-2px brdr-outset-grey flt-lft margin-auto width-35-pct">
				<div class="bg-color-blue color-white font-sans font-size-14px pad-2px width-100-pct">Instructions</div>
				<div class="bg-color-black color-green font-monospace font-size-12px pad-2px">C:\lettersGuessed&#62; &nbsp;<span class="color-white" id="guessesDisplay"> </span><span class="blinking-cursor">|</span></div>
			</main>

			<!-- Error PopUp -->
			<div id="myPopUp" class="popUp">
				<div class="popUpContent">
					<span class="popUpClose">&times;</span>
					<p id="popUpMessage"> </p>
				</div>
			</div>

		</div>

	</div>

	<footer class="bg-color-grey height-40-px position-fixed-bottom width-100-pct"> 1</footer>

	<script>

		function playGame() {
			//Set target word that the player is trying to guess.		
			var targetWord = dictionary[getRandomIntInclusive(0, (dictionary.length - 1))];
			console.log(targetWord);

			//Get elements from html to display the user's guessed letters and remaining chances.
			var guessedLetters = document.getElementById("guessesDisplay");
			var trackerPrint = document.getElementById("chancesDisplay");

			//Set and fill an array with empty letter spaces to be filled in by the user, and display it onscreen.
			var targetWordArray = [];
			var targetWordArrayPrint = document.getElementById("targetWordDisplay");

			//Set variable for end-game win condition.
			var winGame = false;

			//Prepare pop-up window
			var popUpWindow = document.getElementById("myPopUp");
			var span = document.getElementsByClassName("popUpClose")[0];
			var popUpText = document.getElementById("popUpMessage");

			//Print the target word and any blank spaces to the page
			for (i = 0; i < targetWord.length; i++){
				targetWordArray.push(" _ ")
			}
			targetWordArrayPrint.textContent = targetWordArray.join("");
			
			
			//Set the array into which the user's guessed letters will be stored.
			var guessedLettersArray = [];

			//Set the initial number of chances (incorrect guesses) the user is allowed.
			var tracker = 7;

			// When the user clicks on <span> (x), close the modal
			span.onclick = function() {
			    popUpWindow.style.display = "none";
			}		

			document.onkeydown = function(event) {
				var latestGuessedLetter = event.key;

			    //Check to see if the user has already lost, display losing message popUp and break out of loop
	    		if(tracker === 0){
	    			popUpText.textContent = ("ＹＯＵ.  ＡＬＲＥＡＤＹ.  Ｌ Ｏ Ｓ Ｔ.");
	    			popUpWindow.style.display = "block";
	    			return;
	    		}

	    		//Check if user has won. If so, display winning message popUp and break out.
    			else if (winGame == true){
					popUpText.textContent = ("ＹＯＵ.  ＡＬＲＥＡＤＹ.  Ｗ Ｏ Ｎ.");
	    			popUpWindow.style.display = "block";
    				return;
    			}

    			//If the user has not already won or lost, then let them keep playing.
    			else {

			    	//Check to see if user input is a letter before moving on.
			    	if (event.keyCode >= 65 && event.keyCode <= 90) {
			    		/*Call pushAndPrintString function to take in the letter.
			    		Push it to the array of guessed letters, and print it to the "guessedLetters" html element*/
			    		pushAndPrintString(latestGuessedLetter, guessedLettersArray, guessedLetters);

			    		//Call indicesOfLetterInWord to save the indices of the guessed letter within the target word.
			    		var indicesAndTargetWordObject = checkLetterInWord(latestGuessedLetter, targetWord, targetWordArray);

			    		//If guessed letter isn't in the target word, decrease chances and display new total on the page.
			    		if (indicesAndTargetWordObject.letterNumber < 0) {
			    			tracker--;
			    			trackerPrint.textContent = tracker;

			    			//Then check to see if the user has lost. If so, display losing message popUp and break out.
			    			if(tracker === 0){
			    				popUpText.textContent = ("ＹＯＵ ＬＯＳＴ");
				    			popUpWindow.style.display = "block";
			    				return;
		    				}
			    		}
			    		
			    		//Otherwise, print the new contents of the target word array	
			    		else{
			    			targetWordArrayPrint.textContent = targetWordArray.join("");

			    			//Then, check to see if the user has won. If so, display winning message popUp and break out.
			    			var blankSpaceCount = 0; 
			    			for (i = 0; i < targetWordArray.length; i++){
			    				if (targetWordArray[i] == " _ "){
			    					blankSpaceCount++;
			    				}
			    			}

			    			if (blankSpaceCount == 0){
			    				winGame = true;
			    				popUpText.textContent = ("ＹＯＵ  ＷＯＮ. Ｒ Ｅ Ｊ Ｏ Ｉ Ｃ Ｅ.");
				    			popUpWindow.style.display = "block";
			    				return;
			    			}
			    		}
					}

					//Display warning popUp if user input is not a letter.
			    	else {
			    		popUpText.textContent = ("ＬＥＴＴＥＲＳ 　ＯＮＬＹ，　ＰＬＥＡＳＥ");
			    		popUpWindow.style.display = "block";
			    		return;
			    	}
			    }

			}
		
		}
	</script>

</body>

</html>